menu "GC"
  config GC_UNMOVEABLE_DATA
    def_bool n

  config GC_SEPERATE_THREAD
    bool "Seperate GC thread"
    depends on !DISABLE_THREADS
    default y
    help
      This let main GC part runs on its own thread
      to hopefully improve cache locality and also
      for convenience of watching GC CPU usage for
      main part

  config GC_MARK_MAX_DEPTH
    int "Maximum recursion for marking"
    range 200 10000
    default 200
    help
      Upper bound of recursive mark
  
  config GC_OPTIMIZE_DATA_MOVE
    bool "Optimize move"
    default y if !MEMORY_DEBUG
    depends on HEAP_USE_MALLOC
    select GC_UNMOVEABLE_DATA
    help
      Optimize move so that move consist only moving data pointer
      instead actually do the copy.
      
      May hinder debugging if enabled as raw pointer to dead object
      still points to valid data
endmenu

